<form name="form" ng-submit="savePost()" novalidate>
        <div class="page-header">
            <ul class="breadcrumb" ng-if="! isEdit">
                <li>
                    <a ng-click="goBack()" ng-href="/posts/create" translate>post.modify.add_a_post</a>
                </li>
            </ul>
            <ul class="breadcrumb" ng-if="isEdit">
                <li>
                    <a ng-href="/posts/{{post.id}}" translate>{{post.title}}</a>
                </li>
            </ul>
            <div ng-if="! isEdit" class="page-header-body">
                <h1 class="page-title"><span class="icon-left fa-plus" translate translate-values="{ form_name: post.form.name}">post.add_post_type</span></h1>
            </div>
            <div ng-if="isEdit" class="page-header-body">
                <h1 class="page-title"><span class="icon-left fa-pencil" translate translate-values="{form_name: post.form.name}">post.edit_post_type</span></h1>
            </div>
            <div class="page-header-actions">
                <button type="submit" ng-disabled="! canSavePost() || saving_post" class="button-primary"><i class="fa fa-cog fa-spin" ng-show="saving_post"></i> <span translate>post.modify.save_post</span>
                 </button>
            </div>
        </div>
        <div class="page-header">
            <div class="form-field title">
                <label class="input-label required"
                    ng-class="{ 'error': form.title.$invalid && form.title.$dirty, 'success': !form.title.$invalid && form.title.$dirty }"
                    for="title">{{'post.modify.form.title' | translate }}</label>
                <div
                    class="input-icon"
                    ng-class="{ 'error': form.title.$invalid && form.title.$dirty }"
                >
                    <input id="title" ng-class="{ 'error': form.title.$invalid && form.title.$dirty }"
                        name="title" type="text" placeholder="{{'post.modify.form.title' | translate }}" ng-model="post.title" required ng-minlength=2 ng-maxlength=150 class="form-control">
                </div>
                <p ng-repeat="(error, value) in form.title.$error"
                    ng-show="form.title.$dirty"
                    class="alert error"
                    translate="{{'post.valid.title.' + error}}"></p>
            </div>
            <div ng-show="allowedChangeStatus()" class="form-field select">
                <role-selector
                    toggle-role-func="publishPostTo(updatedPost)"
                    post="post" ></role-selector>
            </div>
           <!--
           <div class="form-field">
              <p class="alert"><strong class="icon-left fa-user">Your post will need to be moderated</strong> before itâ€™s visible to the public</p>
           </div>
          -->
        </div>
        <div class="vertical-tabs">
            <nav class="vertical-tabs-menu init">
                <ul>
                    <li
                        ng-repeat="stage in stages"
                        ng-class="{'active': visibleStage == stage.id}"  >
                        <a ng-click="setVisibleStage(stage.id)">
                            <span class="icon-left fa-{{stage.icon||'file-o'}}">
                                {{stage.label}}
                            </span>
                        </a>
                        <span class="status {{stageIsComplete(stage.id)? 'complete' : ''}}">
                        </span>
                    </li>
                    <li></li> <!-- This prevents vertical tabs layout from breaking. leave this blank. -->
                </ul>
            </nav>
            <div class="vertical-tabs-content">
                <button ng-repeat="stage in stages" type="button"
                    class="button-secondary check"
                    ng-disabled="! (isStageValid(stage.id) || stageIsComplete(stage.id))"
                    ng-show="stage.id == visibleStage"
                    ng-click="toggleStageCompletion(stage.id)"
                    translate="{{ stageIsComplete(stage.id) ? 'post.complete' : 'post.mark_complete' }}"
                    >
                </button>
                <div class="form-field"
                    ng-show="isFirstStage(visibleStage)"
                    >
                    <label
                        class="input-label required" for="content"
                        ng-class="{ 'error': form.content.$invalid && form.content.$dirty }"
                    >{{'post.modify.form.description' | translate}}</label>
                    <div
                        class="input-icon"
                        ng-class="{ 'error': form.content.$invalid && form.content.$dirty }"
                    >
                        <textarea id="content" name="content" rows="10" placeholder="{{'post.modify.form.description' | translate}}" ng-model="post.content" required class="form-control"></textarea>
                    </div>
                </div>
                <div ng-if="categories.length"
                    class="form-field"
                    ng-show="isFirstStage(visibleStage)"
                    >
                    <legend class="input-label" for="tags" ng-class="{ 'error': form.tags.$invalid && form.tags.$dirty }" translate>post.modify.form.categories</legend>
                    <div class="form-field checkbox" ng-repeat="category in categories">
                        <input type="checkbox" value="category.id" name="tags" checklist-model="post.tags" checklist-value="category.id">
                        <label>
                            {{category.tag}}
                        </label>
                        <p ng-repeat="(error, value) in form.tags.$error"
                          ng-show="form.tags.$dirty"
                          class="alert error"
                          translate="{{'post.valid.tags.' + error}}"></p>
                    </div>
                </div>
                <post-value-edit post="post" attributes="attributes"></post-value-edit>
              </div>
          </div>

        <div class="page-footer">
            <button type="submit" ng-disabled="! canSavePost() || saving_post" class="button-primary"><i class="fa fa-cog fa-spin" ng-show="saving_post"></i> <span translate>post.modify.save_post</span>
            </button>
        </div>
</form>
