<div class="form-sheet" ng-repeat="stage in stages | limitTo: 1 - stages.length">
    <header class="form-sheet-summary">
        <h1 class="form-sheet-title section-title">{{stage.label}}</h1>
    </header>
    <div ng-show="stage.show_when_published" class="alert" role="alert">
        <p translate="survey.task_visible_when_published">This task will be visible when post is published</p>
    </div>
    <!-- Handle stage completion -->
    <div ng-show="stage.task_is_internal_only" class="alert" role="alert">
        <p>This task is marked for internal use only. It is not seen by users when they create a post.</p>
    </div>
    <div class="form-field switch">
        <label translate="post.task_completed" ng-class="{'required': stage.required}">Task completed</label>
        <div class="toggle-switch">
            <input
                class="tgl"
                ng-attr-id="{{ 'toggle-complete-' + stage.id }}"
                type="checkbox"
                ng-checked="stageIsComplete(stage.id)"
                ng-click="toggleStageCompletion(stage.id)">
            <label class="tgl-btn" for="toggle-complete-{{stage.id}}" ng-attr-id="{{ 'toggle-complete-label-' + stage.id }}"></label>

        </div>
    </div>
    <post-value-edit
            ng-repeat="attribute in stage.attributes | orderBy: 'priority' as filtered_result track by attribute.id"
            post="post"
            form="form"
            medias="medias"
            attribute="attribute"
    ></post-value-edit>
</div>
