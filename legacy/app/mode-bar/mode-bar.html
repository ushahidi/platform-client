<div class="mode-bar" ng-class="{ active : moreActive }">
    <!-- mode bar -->
    <!-- PL JS -->
    <nav>
        <!-- main menu -->
        <ul class="deployment-menu">
            <li ui-sref-active="{ 'active' : 'posts.map' }">
                <a ui-sref="posts.map.all" ui-sref-opts="{reload:true}" class="view-map" data-cy="mb-map-button">
                    <svg class="iconic" role="img">
                        <use xlink:href="#map-marker"></use>
                    </svg>
                    <translate>views.map</translate>
                </a>
            </li>

            <li ui-sref-active="active">
                <a ui-sref="posts.data" ui-sref-opts="{reload:true}" class="view-data" data-cy="mb-data-button">
                    <svg class="iconic" role="img">
                        <use xlink:href="#list-rich"></use>
                    </svg>
                    <translate>views.data</translate>
                </a>
            </li>

            <li ng-if="isActivityAvailable || hasManageSettingsPermission()" ui-sref-active="active" data-message="customize" data-cy="mb-activity-button">
                <a ui-sref="activity">
                    <svg class="iconic" role="img">
                        <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#pulse"></use>
                    </svg>
                    <translate>views.activity</translate>
                </a>
            </li>

            <li>
                <button class="more-menu-trigger" ng-class="{ active : moreActive }" ng-click="showMore($event)">
                    <svg class="iconic" role="img">
                        <use xlink:href="#ellipses"></use>
                    </svg>
                    <translate>nav.more</translate>
                </button>
                <ul>
                    <li data-message="customize" ng-show="hasManageSettingsPermission()" ng-class="{active: $state.includes('settings')}" data-cy="mb-settings-button">
                        <a ui-sref="settings.list">
                            <svg class="iconic" role="img">
                                <use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#cog"></use>
                            </svg>
                            <translate>nav.settings</translate>
                        </a>
                    </li>
                </ul>
            </li>
        </ul>
        <!-- main menu -->

        <ul class="account-menu">
        <!-- user account menu -->

            <li>
                <button ng-click="viewCollectionListing()" data-cy="mb-collections-button">
                    <svg class="iconic">
                        <use xlink:href="#grid-three-up"></use>
                    </svg>
                    <span class="label" translate>nav.collections</span>
                </button>
            </li>

            <li ng-hide="currentUser">
                <button ng-click="login()" data-modal="login" data-cy="mb-login-page-button">
                    <svg class="iconic" role="img">
                        <use xlink:href="#account-login"></use>
                    </svg>
                    <translate translate="nav.login">Log in</translate>
                </button>
            </li>

            <li ng-show="currentUser">
                <button ng-click="viewAccountSettings()" data-cy="mb-account-settings-button"
                    <img class="avatar" ng-src="https://www.gravatar.com/avatar/{{ currentUser.gravatar || '00000000000000000000000000000000' }}?d=retro" alt="account_settings"/>
                    <span class="label" translate="nav.account_settings">Account Settings</span>
                </button>
            </li>

            <li ng-show="!currentUser && canRegister">
                <button ng-click="register()" data-modal="signup" data-cy="mb-signup-page-button">
                    <svg class="iconic" role="img">
                        <use xlink:href="#person"></use>
                    </svg>
                    <translate translate="nav.register">Sign up</translate>
                </button>
            </li>

            <li ng-show="currentUser">
                <button ng-click="logout()" data-modal="login" data-cy="mb-logout-button">
                    <svg class="iconic" role="img">
                        <use xlink:href="#account-logout"></use>
                    </svg>
                    <span class="label" translate="nav.logout">Log out</span>
                </button>
            </li>

            <li>
                <button ng-click="viewSupportLinks()" data-cy="mb-ushahidi-support-button">
                    <ng-include src="'mode-bar/ushahidi-logo.html'"></ng-include>
                    <span class="label" translate>app.support</span>
                </button>
            </li>

        <!-- user account menu -->
        </ul>

    </nav>
    <!-- PL JS -->
    <!-- mode bar -->
</div>
